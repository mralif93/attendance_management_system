{% extends 'attendance/master/base.html' %}
{% load static %}

{% block title %}Attendance Management System{% endblock title %}
{% block css %}
<style>
  main {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  #reader {
    width: 600px;
  }

  #result {
    text-align: center;
    font-size: 1.5rem;
  }
</style>
{% endblock css %}

{% block content %}
<div class="container mt-5">
  <div class="row">
    <div class="col-12">
      <h4 class="card-title text-center">QR Scanner</h4>

      <main>
        <div id="reader"></div>
        <div id="result"></div>
      </main>
    </div>
  </div>
</div>
{% endblock content %}

{% block js %}
<script>
  $(document).ready(function() {
    console.log('ready!');

    const scanner = new Html5QrcodeScanner('reader', {
      qrcode: {
        width: 250,
        height: 250,
      },
      fps: 20,
    });

    scanner.render(success, error);

    function success(result) {
      console.log(result);
      document.getElementById('result').innerHTML = `
      <h2>Success!</h2>
      <p class='fw-bold'>${result}</p>`;

      scanner.clear();
      document.getElementById('reader').remove();
    }

    function error(err) {
      console.error(err);
    }

  });
</script>
{% endblock js %}